!function(e,s){if("object"==typeof exports&&"object"==typeof module)module.exports=s();else if("function"==typeof define&&define.amd)define([],s);else{var t=s();for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(self,(()=>(()=>{"use strict";var e={223:(e,s,t)=>{t.r(s)},403:function(e,s,t){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const o=r(t(787));class i extends o.default{constructor(){super(...arguments),this.doAppend=()=>{const e=document.createElement("style");e.appendChild(document.createTextNode(this.responseData));let s=document.head;s||(s=document.createElement("head"),document.appendChild(s)),s.appendChild(e)}}}s.default=i},848:function(e,s,t){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.JSLoader=s.CSSLoader=s.MultiResourceLoader=s.SimpleResourceLoader=void 0;const o=r(t(787));s.SimpleResourceLoader=o.default;const i=r(t(38));s.MultiResourceLoader=i.default;const a=r(t(403));s.CSSLoader=a.default;const n=r(t(594));s.JSLoader=n.default},594:function(e,s,t){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const o=r(t(787));class i extends o.default{constructor(){super(...arguments),this.doAppend=()=>{const e=document.createElement("script");e.type="text/javascript",e.appendChild(document.createTextNode(this.responseData)),document.body.appendChild(e)}}}s.default=i},38:(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=class{constructor(){this._resourceLoaders={},this._nbResourceLoaders=0,this._listeners=[],this._status="waiting",this._progress=0}addResourceLoader(e,s){this._resourceLoaders[e]||(this._resourceLoaders[e]=s,s.onUpdate((e=>{this.refreshStatus(),this.refreshProgress()}))),this.refreshNbResourceLoaders()}getResourceLoader(e){return this._resourceLoaders[e]?this._resourceLoaders[e]:null}onUpdate(e){this._listeners.push(e)}get status(){return this._status}get progress(){return this._progress}get responseData(){const e={};for(const s in this._resourceLoaders)e[s]=this._resourceLoaders[s].responseData;return e}abort(){for(const e in this._resourceLoaders)this._resourceLoaders[e].abort()}load(){for(const e in this._resourceLoaders)"done"!==this._resourceLoaders[e].status&&this._resourceLoaders[e].load();this._nbResourceLoaders||(this._status="done",this.dispatch())}append(){for(const e in this._resourceLoaders)this._resourceLoaders[e].append()}dispatch(){for(const e of this._listeners)e(this)}refreshStatus(){const e={waiting:0,pending:0,canceled:0,error:0,done:0};for(const s in this._resourceLoaders)e[this._resourceLoaders[s].status]++;const s=this._status;e.error>0?this._status="error":e.done===this._nbResourceLoaders?this._status="done":e.canceled===this._nbResourceLoaders?this._status="canceled":e.pending>0?this._status="pending":this._status="waiting",s!==this._status&&this.dispatch()}refreshProgress(){const e=this._progress;if(this._nbResourceLoaders){let e=0;for(const s in this._resourceLoaders)e+=this._resourceLoaders[s].progress;this._progress=Math.round(e/this._nbResourceLoaders)}else this._progress=100;e!==this._progress&&this.dispatch()}refreshNbResourceLoaders(){this._nbResourceLoaders=0;for(const e in this._resourceLoaders)this._nbResourceLoaders++}}},787:(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=class{get status(){return this._status}get progress(){return this._progress}get responseStatus(){return this._responseStatus}get responseTextStatus(){return this._responseTextStatus}get responseData(){return this._responseData}constructor(e,s=!0,t=!0){this._xhr=null,this._url="",this._listeners=[],this._responseStatus=null,this._responseTextStatus="",this._responseData=null,this._status="waiting",this._progress=0,this.isAppend=!1,this.autoAppend=!0,this.callbackDone=e=>{this._xhr&&(this._responseStatus=this._xhr.status,this._responseTextStatus=this._xhr.statusText,this._responseData=this._xhr.responseText,this._progress=100,this._status=200===this._xhr.status?"done":"error",this._xhr=null,this.dispatch())},this.callbackFail=e=>{this._xhr&&(this._responseStatus=this._xhr.status,this._responseTextStatus=this._xhr.statusText,this._responseData=this._xhr.responseText,this._progress=100,this._status="error",this._xhr=null,this.dispatch())},this.callbackProgress=e=>{e.lengthComputable&&(this._progress=Math.ceil(100*e.loaded/e.total)),this.dispatch()},this.callbackAbort=e=>{this._xhr&&(this._progress=100,this._status="canceled",this._xhr=null,this.dispatch())},this._url=e,this.autoAppend=t,s&&this.load()}onUpdate(e){this._listeners.push(e)}abort(){this._xhr&&this._xhr.abort()}load(){this.abort(),this._status="pending",this._xhr=new XMLHttpRequest,this._xhr.onprogress=this.callbackProgress,this._xhr.onerror=this.callbackFail,this._xhr.onload=this.callbackDone,this._xhr.onabort=this.callbackAbort,this._xhr.open("GET",this._url,!0),this._xhr.send(null),this.dispatch()}dispatch(){for(const e of this._listeners)e(this);this.autoAppend&&"done"===this.status&&this.append()}append(){"done"!==this.status||this.isAppend||(this.doAppend(),this.isAppend=!0)}doAppend(){}}},970:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0});const r=t(848);s.default=class{constructor(e){this._elementInDom=!1,this._errorShown=!1,this.errorMessage=null,this._loader=new r.MultiResourceLoader,e&&(this._contentElement=document.getElementById(e)),this._loader.onUpdate((e=>{this.show(),"done"!==e.status?"error"!==e.status?this._progressBarElement.setAttribute("style",`width: ${e.progress}%`):this.error():this.done()})),this._element=document.createElement("div"),this._element.className="resources-loader-layout";const s=document.createElement("div");s.className="resources-loader-box";const t=document.createElement("div");t.className="resources-loader-indicator";const o=document.createElement("div");o.className="progress resources-loader-progress",this._progressBarElement=document.createElement("div"),this._progressBarElement.className="progress-bar bg-primary",this._progressBarElement.setAttribute("style","width: 0%"),o.appendChild(this._progressBarElement),t.appendChild(o),s.appendChild(t),this._element.appendChild(s)}addResources(e){for(const s in e){const t=e[s];/\.js$/.test(t)?this._loader.addResourceLoader(s,new r.JSLoader(t,!1,!1)):/\.css$/.test(t)?this._loader.addResourceLoader(s,new r.CSSLoader(t,!1,!1)):this._loader.addResourceLoader(s,new r.SimpleResourceLoader(t,!1,!1))}this._loader.load()}show(){this._elementInDom||(this._contentElement&&this._contentElement.setAttribute("style","display: none"),document.body.appendChild(this._element),this._elementInDom=!0)}hide(){this._elementInDom&&(this._contentElement&&this._contentElement.removeAttribute("style"),document.body.removeChild(this._element),this._elementInDom=!1)}done(){this._loader.append(),this.hide()}error(){this._errorShown||(this._progressBarElement.setAttribute("style","width: 100%"),this._progressBarElement.className="progress-bar bg-danger",this.errorMessage&&(this._element.className=this._element.className+" error",this._progressBarElement.appendChild(document.createTextNode(this.errorMessage))),this._errorShown=!0)}}},208:function(e,s,t){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),t(223);const o=new(r(t(970)).default)("app");o.errorMessage="Oups...",o.addResources(window.__ENV__.resources)}},s={};function t(r){var o=s[r];if(void 0!==o)return o.exports;var i=s[r]={exports:{}};return e[r].call(i.exports,i,i.exports,t),i.exports}return t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t(208)})()));
//# sourceMappingURL=app.js.map